(function(e){function r(r){for(var n,i,s=r[0],u=r[1],a=r[2],l=0,m=[];l<s.length;l++)i=s[l],Object.prototype.hasOwnProperty.call(c,i)&&c[i]&&m.push(c[i][0]),c[i]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);d&&d(r);while(m.length)m.shift()();return o.push.apply(o,a||[]),t()}function t(){for(var e,r=0;r<o.length;r++){for(var t=o[r],n=!0,s=1;s<t.length;s++){var u=t[s];0!==c[u]&&(n=!1)}n&&(o.splice(r--,1),e=i(i.s=t[0]))}return e}var n={},c={app:0},o=[];function i(r){if(n[r])return n[r].exports;var t=n[r]={i:r,l:!1,exports:{}};return e[r].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=e,i.c=n,i.d=function(e,r,t){i.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,r){if(1&r&&(e=i(e)),8&r)return e;if(4&r&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(i.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var n in e)i.d(t,n,function(r){return e[r]}.bind(null,n));return t},i.n=function(e){var r=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(r,"a",r),r},i.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],u=s.push.bind(s);s.push=r,s=s.slice();for(var a=0;a<s.length;a++)r(s[a]);var d=u;o.push([0,"chunk-vendors"]),t()})({0:function(e,r,t){e.exports=t("56d7")},"56d7":function(e,r,t){"use strict";t.r(r);var n=t("7a23");const c={class:"wrapper"},o={class:"container"},i={class:"widget"},s={class:"widget__inner"},u=Object(n["f"])("h1",{class:"widget__title"}," Crypto Exchange ",-1),a={class:"widget__text"},d=Object(n["g"])(" Exchange fast and easy "),l={class:"currency-group widget__currency-group"},m=Object(n["f"])("div",{class:"currency-group__swap"},null,-1);function h(e,r,t,h,p,b){const j=Object(n["m"])("ErrorComponent"),y=Object(n["m"])("CurrencyForm"),O=Object(n["m"])("ExchangeForm"),g=Object(n["m"])("PreloaderComponent");return Object(n["j"])(),Object(n["e"])("div",c,[Object(n["f"])("div",o,[Object(n["f"])("section",i,[Object(n["f"])("div",s,[u,Object(n["f"])("div",a,[d,Object(n["r"])(Object(n["h"])(j,{class:"widget__text-error"},{default:Object(n["q"])(()=>[Object(n["g"])(Object(n["o"])(p.error.message),1)]),_:1},512),[[n["p"],p.error.isError]])]),Object(n["f"])("div",l,[Object(n["h"])(y,{type:"number",min:p.minAmount,step:"0.00000001",disabled:p.isPending,currencies:p.currencies,currency:p.from,amount:p.amount.from,"show-error":!b.isValid,onChangeAmount:b.changeAmount,onChangeCurrency:r[0]||(r[0]=e=>b.changeСurrency("from",e))},null,8,["min","disabled","currencies","currency","amount","show-error","onChangeAmount"]),m,Object(n["h"])(y,{type:"text",disabled:!0,currencies:p.currencies,currency:p.to,amount:p.amount.to,onChangeCurrency:r[1]||(r[1]=e=>b.changeСurrency("to",e))},null,8,["currencies","currency","amount"])]),Object(n["h"])(O)])])]),Object(n["r"])(Object(n["h"])(g,null,null,512),[[n["p"],p.isPending]])])}var p=t("bc3a"),b=t.n(p);const j={class:"currency currency-group__currency"},y=Object(n["g"])(" The amount is too small "),O={class:"currency__inner"};function g(e,r,t,c,o,i){const s=Object(n["m"])("ErrorComponent"),u=Object(n["m"])("CurrencyInput"),a=Object(n["m"])("CurrencyBtn"),d=Object(n["m"])("CurrencyDropdown"),l=Object(n["n"])("click-outside");return Object(n["r"])((Object(n["j"])(),Object(n["e"])("div",j,[Object(n["r"])(Object(n["h"])(s,{class:"currency__error"},{default:Object(n["q"])(()=>[y]),_:1},512),[[n["p"],t.showError]]),Object(n["f"])("div",O,[Object(n["h"])(u,Object(n["i"])(e.$attrs,{amount:t.amount,onChangeAmount:r[0]||(r[0]=r=>e.$emit("changeAmount",r))}),null,16,["amount"]),Object(n["h"])(a,{currency:t.currency,onToggle:r[1]||(r[1]=e=>o.dropdownActive=!o.dropdownActive)},null,8,["currency"])]),Object(n["h"])(n["b"],{name:"fade"},{default:Object(n["q"])(()=>[Object(n["r"])(Object(n["h"])(d,{currencies:t.currencies,onClose:i.close,onChangeCurrency:r[2]||(r[2]=r=>e.$emit("changeCurrency",r))},null,8,["currencies","onClose"]),[[n["p"],o.dropdownActive]])]),_:1})])),[[l,i.close]])}const f={class:"currency__dropdown"};function v(e,r,t,c,o,i){const s=Object(n["m"])("CurrencyHeader"),u=Object(n["m"])("CurrencyList");return Object(n["j"])(),Object(n["e"])("div",f,[Object(n["h"])(s,{onClose:r[0]||(r[0]=r=>e.$emit("close")),modelValue:o.filter,"onUpdate:modelValue":r[1]||(r[1]=e=>o.filter=e),modelModifiers:{trim:!0}},null,8,["modelValue"]),Object(n["h"])(u,{currencies:i.filteredCurrencies,onChangeCurrency:i.changeCurrency},null,8,["currencies","onChangeCurrency"])])}const _={class:"currency__dropdown-header"},C=["value"];function w(e,r,t,c,o,i){return Object(n["j"])(),Object(n["e"])("div",_,[Object(n["f"])("input",Object(n["i"])({value:t.modelValue,onInput:r[0]||(r[0]=r=>e.$emit("update:modelValue",r.target.value)),type:"text",class:"input currency__dropdown-input",placeholder:"Search"},e.$attrs),null,16,C),Object(n["f"])("span",{class:"currency__dropdown-close",role:"button",onClick:r[1]||(r[1]=r=>e.$emit("close"))})])}var E={name:"CurrencyHeader",inheritAttrs:!1,props:{modelValue:{type:String,required:!0}},emits:["close","update:modelValue"]},A=t("6b0d"),k=t.n(A);const x=k()(E,[["render",w]]);var $=x;const P={class:"currency__dropdown-body"},q={class:"currency__dropdown-empty"};function I(e,r,t,c,o,i){const s=Object(n["m"])("CurrencyItem");return Object(n["j"])(),Object(n["e"])("div",P,[Object(n["r"])(Object(n["f"])("ul",{class:"currency__dropdown-list",onClick:r[0]||(r[0]=(...e)=>i.changeCurrency&&i.changeCurrency(...e))},[(Object(n["j"])(!0),Object(n["e"])(n["a"],null,Object(n["k"])(t.currencies,e=>(Object(n["j"])(),Object(n["d"])(s,{key:e.ticker,currency:e},null,8,["currency"]))),128))],512),[[n["p"],t.currencies.length]]),Object(n["r"])(Object(n["f"])("div",q," No matches ",512),[[n["p"],!t.currencies.length]])])}const S=["data-ticker"],V=["src","alt"],M={class:"currency__dropdown-list-item-ticker"},B={class:"currency__dropdown-list-item-name"};function F(e,r,t,c,o,i){return Object(n["j"])(),Object(n["e"])("li",{class:"currency__dropdown-list-item","data-ticker":t.currency.ticker},[Object(n["f"])("img",{class:"currency__dropdown-list-item-img",src:t.currency.image,alt:t.currency.ticker},null,8,V),Object(n["f"])("span",M,Object(n["o"])(t.currency.ticker),1),Object(n["f"])("span",B,Object(n["o"])(t.currency.name),1)],8,S)}var L={name:"CurrencyItem",props:{currency:{type:Object,required:!0}}};const T=k()(L,[["render",F]]);var Y=T,D={name:"CurrencyList",props:{currencies:{type:Array,required:!0}},emits:["changeCurrency"],components:{CurrencyItem:Y},methods:{changeCurrency(e){const r=e.target.closest("[data-ticker]");r&&this.$emit("changeCurrency",this.currencies.find(e=>e.ticker===r.dataset.ticker))}}};const H=k()(D,[["render",I]]);var K=H,J={name:"CurrencyDropdown",components:{CurrencyHeader:$,CurrencyList:K},props:{currencies:{type:Array,required:!0}},emits:["close","changeCurrency"],data(){return{filter:""}},computed:{filteredCurrencies(){return this.currencies.filter(e=>-1!==e.ticker.indexOf(this.filter))}},methods:{changeCurrency(e){this.$emit("changeCurrency",e),this.$emit("close")}}};const N=k()(J,[["render",v]]);var U=N;const z={class:"currency__input"},G=["value"];function Q(e,r,t,c,o,i){return Object(n["j"])(),Object(n["e"])("div",z,[Object(n["f"])("input",Object(n["i"])({value:t.amount,onChange:r[0]||(r[0]=r=>e.$emit("changeAmount",r.target.value)),class:"input"},e.$attrs),null,16,G)])}var R={name:"CurrencyInput",inheritAttrs:!1,props:{amount:{type:String,required:!0}},emits:["changeAmount"]};const W=k()(R,[["render",Q]]);var X=W;const Z=["src","alt"];function ee(e,r,t,c,o,i){return Object(n["j"])(),Object(n["e"])("div",{class:"currency__btn",role:"button",onClick:r[0]||(r[0]=r=>e.$emit("toggle"))},[Object(n["f"])("img",{src:t.currency.image,alt:t.currency.ticker},null,8,Z),Object(n["g"])(" "+Object(n["o"])(t.currency.ticker),1)])}var re={name:"CurrencyBtn",props:{currency:{type:Object,required:!0}},emits:["toggle"]};const te=k()(re,[["render",ee]]);var ne=te;const ce={class:"error"},oe=Object(n["g"])("Something went wrong.");function ie(e,r,t,c,o,i){return Object(n["j"])(),Object(n["e"])("span",ce,[Object(n["l"])(e.$slots,"default",{},()=>[oe])])}var se={name:"ErrorComponent"};const ue=k()(se,[["render",ie]]);var ae=ue,de={name:"CurrencyForm",inheritAttrs:!1,components:{CurrencyDropdown:U,CurrencyInput:X,CurrencyBtn:ne,ErrorComponent:ae},props:{currencies:{type:Array,required:!0},currency:{type:Object,required:!0},amount:{type:String,required:!0},showError:{type:Boolean,required:!1,default:!1}},emits:["changeAmount","changeCurrency"],data(){return{dropdownActive:!1}},methods:{close(){this.dropdownActive=!1}}};const le=k()(de,[["render",g]]);var me=le;const he={class:"address"},pe=Object(n["f"])("div",{class:"address__label"}," Your Ethereum address ",-1),be={class:"address__row"};function je(e,r,t,c,o,i){const s=Object(n["m"])("ExchangeInput"),u=Object(n["m"])("ExchangeBtn");return Object(n["j"])(),Object(n["e"])("div",he,[pe,Object(n["f"])("div",be,[Object(n["h"])(s),Object(n["h"])(u)])])}const ye={class:"address__input"};function Oe(e,r,t,c,o,i){return Object(n["j"])(),Object(n["e"])("div",ye,[Object(n["f"])("input",Object(n["i"])({type:"text",class:"input"},e.$attrs),null,16)])}var ge={name:"ExchangeInput",inheritAttrs:!1};const fe=k()(ge,[["render",Oe]]);var ve=fe;const _e={class:"address__btn"};function Ce(e,r,t,c,o,i){return Object(n["j"])(),Object(n["e"])("div",_e,[Object(n["f"])("button",Object(n["i"])(e.$attrs,{class:"btn btn_color_blue"})," Exchange ",16)])}var we={name:"ExchangeBtn",inheritAttrs:!1};const Ee=k()(we,[["render",Ce]]);var Ae=Ee,ke={name:"ExchangeForm",components:{ExchangeInput:ve,ExchangeBtn:Ae}};const xe=k()(ke,[["render",je]]);var $e=xe;const Pe={class:"loader"},qe=Object(n["f"])("div",{class:"loader__icon"},[Object(n["f"])("span",{class:"loader__icon-line"})],-1),Ie=[qe];function Se(e,r){return Object(n["j"])(),Object(n["e"])("div",Pe,Ie)}const Ve={},Me=k()(Ve,[["render",Se]]);var Be=Me,Fe={name:"App",components:{CurrencyForm:me,ExchangeForm:$e,PreloaderComponent:Be,ErrorComponent:ae},data(){return{APIKEY:"c9155859d90d239f909d2906233816b26cd8cf5ede44702d422667672b58b0cd",currencies:[],from:{},to:{},amount:{from:"",to:""},minAmount:0,isPending:!0,error:{isError:!1,message:"",dictionary:{pair_is_inactive:"Pair is inactive",deposit_too_small:"Out of min amount"}}}},computed:{isValid(){return Number(this.amount.from)>=this.minAmount}},methods:{http(e){return this.isPending=!0,new Promise((r,t)=>{b()(e).then(e=>{this.removeError(),r(e)}).catch(e=>{this.doError(e),t(e)}).finally(()=>this.isPending=!1)})},getCurrencies(){return new Promise((e,r)=>{this.http({method:"get",url:"https://api.changenow.io/v1/currencies"}).then(r=>{this.currencies=r.data,e()}).catch(()=>r())})},getMinimalAmount(){return new Promise((e,r)=>{this.http({method:"get",url:`https://api.changenow.io/v1/min-amount/${this.from.ticker}_${this.to.ticker}?api_key=${this.APIKEY}`}).then(r=>{this.minAmount=r.data.minAmount,this.amount.from=String(this.minAmount),e()}).catch(()=>r())})},getExchangeAmount(){return new Promise((e,r)=>{this.http({method:"get",url:`https://api.changenow.io/v1/exchange-amount/${this.amount.from}/${this.from.ticker}_${this.to.ticker}?api_key=${this.APIKEY}`}).then(r=>{this.amount.to=String(r.data.estimatedAmount),e()}).catch(()=>r())})},changeAmount(e){this.amount.from=e,this.isValid&&this.getExchangeAmount()},"changeСurrency"(e,r){this[e]=r,this.getMinimalAmount().then(this.getExchangeAmount)},doError(e){var r,t;this.error.isError=!0,this.error.message=(null===(r=e.response.data)||void 0===r?void 0:r.message)||this.error.dictionary[null===(t=e.response.data)||void 0===t?void 0:t.error]||e.message},removeError(){this.error.isError=!1,this.error.message=""}},watch:{isValid(e){e||(this.amount.to="—")},"error.isError"(e){e&&(this.amount.to="—")}},mounted(){this.getCurrencies().then(()=>{this.from=this.currencies[0],this.to=this.currencies[1],this.getMinimalAmount().then(this.getExchangeAmount)})}};const Le=k()(Fe,[["render",h]]);var Te=Le;t("744b");const Ye=Object(n["c"])(Te);Ye.directive("click-outside",{beforeMount(e,r){e.clickOutsideEvent=function(t){e===t.target||e.contains(t.target)||r.value(t,e)},document.body.addEventListener("click",e.clickOutsideEvent)},unmounted(e){document.body.removeEventListener("click",e.clickOutsideEvent)}}),Ye.mount("#app")},"744b":function(e,r,t){}});
//# sourceMappingURL=app.b935825c.js.map